<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Risk Assessment — CyberRisk Pro</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
        .risk-item {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 13px 14px;
            border: 1px solid var(--border);
            border-left: 2px solid var(--border-2);
            border-radius: var(--r-sm);
            margin-bottom: 8px;
            background: var(--card);
            transition: border-color .15s;
        }

        .risk-item:hover {
            border-color: var(--border-2);
        }

        .risk-item.is-critical,
        .risk-item.is-high {
            border-left-color: var(--red);
        }

        .risk-item.is-low {
            border-left-color: var(--blue);
        }

        .risk-rank {
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            color: var(--t3);
            width: 20px;
            flex-shrink: 0;
            text-align: center;
        }

        .risk-name {
            font-size: 13px;
            font-weight: 600;
            color: var(--t1);
        }

        .risk-type {
            font-size: 10.5px;
            color: var(--t3);
            margin-top: 2px;
        }

        .risk-urgency {
            font-size: 10px;
            font-weight: 600;
            letter-spacing: .5px;
            text-transform: uppercase;
            text-align: right;
            flex-shrink: 0;
        }

        /* Matrix: no numbers by default, show on hover via tooltip only */
        .mx-cell {
            font-size: 0 !important;
            cursor: default;
        }

        .mx-cell::after {
            content: attr(title);
            font-size: 0;
        }
    </style>
</head>

<body>
    <div class="app">
        <div class="main">
            <header class="topbar">
                <button class="hamburger" onclick="toggleSidebar()"><svg viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.75">
                        <line x1="3" y1="12" x2="21" y2="12" />
                        <line x1="3" y1="6" x2="21" y2="6" />
                        <line x1="3" y1="18" x2="21" y2="18" />
                    </svg></button>
                <div class="page-header">
                    <div class="page-title">Risk Assessment</div>
                    <div class="breadcrumb"><span>Assessment</span><span class="bc-sep">/</span><span
                            class="bc-cur">Risk Assessment</span></div>
                </div>
                <div class="topbar-actions">
                    <a class="btn btn-primary btn-sm" href="findings.html">View Findings</a>
                </div>
            </header>
            <main class="page">

                <div class="g2">

                    <!-- Prioritized Risk List — replaces bar chart -->
                    <div class="card">
                        <div class="card-hd mb-4">
                            <div>
                                <div class="card-label mb-0">Assets by Risk Priority</div>
                                <div class="text-xs text-t3 mt-1">Sorted highest to lowest — focus on red items first
                                </div>
                            </div>
                        </div>
                        <div id="riskList"></div>
                    </div>

                    <!-- Risk Matrix — color intensity only, no numbers, tooltip on hover -->
                    <div class="card">
                        <div class="card-label">Risk Matrix</div>
                        <p class="text-xs text-t3 mb-3">Likelihood (Y) &times; Impact (X) — <em>hover a cell to see its
                                score</em></p>
                        <div class="matrix" id="matrix" style="margin-bottom:10px"></div>
                        <div class="flex gap-2 mb-4" style="flex-wrap:wrap">
                            <span class="badge badge-low">Low 1–4</span>
                            <span class="badge badge-medium">Medium 5–9</span>
                            <span class="badge badge-high">High 10–14</span>
                            <span class="badge badge-critical">Critical 15–25</span>
                        </div>
                        <hr />
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-t2">Organisation Risk Score</span>
                            <span class="badge badge-high mono fw-600" style="font-size:12px;padding:4px 12px">7.4 /
                                10</span>
                        </div>
                    </div>

                </div>

                <!-- Risk Register -->
                <div class="card mt-4">
                    <div class="card-label mb-4">Risk Register</div>
                    <div class="table-wrap">
                        <table>
                            <thead>
                                <tr>
                                    <th>Ref</th>
                                    <th>Asset</th>
                                    <th>Threat</th>
                                    <th>Likelihood</th>
                                    <th>Impact</th>
                                    <th>Score</th>
                                    <th>Level</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="mono text-t3 text-xs">RAR-001</td>
                                    <td class="fw-500">Web Application</td>
                                    <td>SQL Injection</td>
                                    <td><span class="badge badge-critical">5 — Almost Certain</span></td>
                                    <td><span class="badge badge-critical">5 — Catastrophic</span></td>
                                    <td class="mono fw-700 text-red">25</td>
                                    <td><span class="badge badge-critical">Critical</span></td>
                                    <td><span class="badge badge-info">Open</span></td>
                                </tr>
                                <tr>
                                    <td class="mono text-t3 text-xs">RAR-002</td>
                                    <td class="fw-500">Application Server</td>
                                    <td>Exposed Ports</td>
                                    <td><span class="badge badge-high">4 — Likely</span></td>
                                    <td><span class="badge badge-high">4 — Major</span></td>
                                    <td class="mono fw-700 text-red">16</td>
                                    <td><span class="badge badge-critical">Critical</span></td>
                                    <td><span class="badge badge-info">Open</span></td>
                                </tr>
                                <tr>
                                    <td class="mono text-t3 text-xs">RAR-003</td>
                                    <td class="fw-500">Network Firewall</td>
                                    <td>Default Credentials</td>
                                    <td><span class="badge badge-medium">3 — Possible</span></td>
                                    <td><span class="badge badge-critical">5 — Catastrophic</span></td>
                                    <td class="mono fw-700 text-red">15</td>
                                    <td><span class="badge badge-critical">Critical</span></td>
                                    <td><span class="badge badge-info">Open</span></td>
                                </tr>
                                <tr>
                                    <td class="mono text-t3 text-xs">RAR-004</td>
                                    <td class="fw-500">Database Server</td>
                                    <td>No Audit Logging</td>
                                    <td><span class="badge badge-high">4 — Likely</span></td>
                                    <td><span class="badge badge-medium">3 — Moderate</span></td>
                                    <td class="mono fw-700 text-red">12</td>
                                    <td><span class="badge badge-high">High</span></td>
                                    <td><span class="badge badge-info">Open</span></td>
                                </tr>
                                <tr>
                                    <td class="mono text-t3 text-xs">RAR-005</td>
                                    <td class="fw-500">Web Application</td>
                                    <td>Cross-Site Scripting</td>
                                    <td><span class="badge badge-high">4 — Likely</span></td>
                                    <td><span class="badge badge-low">2 — Minor</span></td>
                                    <td class="mono fw-700 text-blue">8</td>
                                    <td><span class="badge badge-medium">Medium</span></td>
                                    <td><span class="badge badge-neutral">In Progress</span></td>
                                </tr>
                                <tr>
                                    <td class="mono text-t3 text-xs">RAR-006</td>
                                    <td class="fw-500">HR System</td>
                                    <td>Weak Password Policy</td>
                                    <td><span class="badge badge-low">2 — Unlikely</span></td>
                                    <td><span class="badge badge-low">2 — Minor</span></td>
                                    <td class="mono fw-700 text-blue">4</td>
                                    <td><span class="badge badge-low">Low</span></td>
                                    <td><span class="badge badge-low">Resolved</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <div class="modal-overlay" id="modal-overlay" onclick="if(event.target===this)closeModal()">
        <div class="modal" id="modal-body"></div>
    </div>
    <script src="sidebar.js"></script>
    <script src="app.js"></script>
    <script>
        renderMatrix('matrix');

        const ASSETS = [
            { name: 'Web Application', type: 'Web App &middot; AWS Cloud', rank: 1, level: 'Critical', urgency: 'Contain immediately' },
            { name: 'Database Server', type: 'Database &middot; On-Premise', rank: 2, level: 'Critical', urgency: 'Contain immediately' },
            { name: 'Application Server', type: 'Server &middot; Data Center', rank: 3, level: 'Critical', urgency: 'Remediate this week' },
            { name: 'Network Firewall', type: 'Network Device &middot; Data Center', rank: 4, level: 'Critical', urgency: 'Remediate this week' },
            { name: 'LDAP / Active Directory', type: 'Server &middot; On-Premise', rank: 5, level: 'High', urgency: 'Remediate within 7 days' },
            { name: 'API Gateway', type: 'API Service &middot; AWS Cloud', rank: 6, level: 'High', urgency: 'Remediate within 14 days' },
            { name: 'Cloud Storage', type: 'Cloud Service &middot; AWS Cloud', rank: 7, level: 'Medium', urgency: 'Review within 30 days' },
            { name: 'VPN Gateway', type: 'Network Device &middot; Data Center', rank: 8, level: 'Medium', urgency: 'Review within 30 days' },
            { name: 'HR Information System', type: 'Web App &middot; Internal', rank: 9, level: 'Low', urgency: 'Monitor quarterly' },
            { name: 'Email Server', type: 'Server &middot; On-Premise', rank: 10, level: 'Low', urgency: 'Monitor quarterly' },
        ];

        const lCls = l => l === 'Critical' ? 'badge-critical' : l === 'High' ? 'badge-high' : l === 'Medium' ? 'badge-medium' : 'badge-low';
        const rCls = l => 'is-' + ({ 'Critical': 'critical', 'High': 'high', 'Medium': 'medium', 'Low': 'low' }[l]);
        const urgCol = l => (l === 'Critical' || l === 'High') ? 'var(--red)' : l === 'Medium' ? 'var(--t2)' : 'var(--blue)';

        document.getElementById('riskList').innerHTML = ASSETS.map(a => `
  <div class="risk-item ${rCls(a.level)}">
    <span class="risk-rank">${a.rank}</span>
    <div style="flex:1;min-width:0">
      <div class="risk-name">${a.name}</div>
      <div class="risk-type">${a.type}</div>
    </div>
    <span class="badge ${lCls(a.level)}">${a.level}</span>
    <span class="risk-urgency" style="color:${urgCol(a.level)}">${a.urgency}</span>
  </div>`).join('');
    </script>
</body>

</html>