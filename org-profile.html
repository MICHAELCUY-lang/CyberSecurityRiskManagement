<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Organization Profile — CyberRisk Pro</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <div class="app">
        <div class="main">
            <header class="topbar">
                <button class="hamburger" onclick="toggleSidebar()"><svg viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.75">
                        <line x1="3" y1="12" x2="21" y2="12" />
                        <line x1="3" y1="6" x2="21" y2="6" />
                        <line x1="3" y1="18" x2="21" y2="18" />
                    </svg></button>
                <div class="page-header">
                    <div class="page-title">Organization Profile</div>
                    <div class="breadcrumb"><span>CyberRisk Pro</span><span class="bc-sep">/</span><span
                            class="bc-cur">Organization</span></div>
                </div>
                <div class="topbar-actions">
                    <button class="btn btn-primary btn-sm" onclick="save()">Save Profile</button>
                </div>
            </header>
            <main class="page">
                <div class="g2">
                    <!-- Left: Form -->
                    <div class="card">
                        <div class="card-label">Organization Details</div>
                        <div class="form-group">
                            <label class="form-label">Organization Name</label>
                            <input class="form-control" id="orgName" value="PT Teknologi Nusantara"
                                placeholder="e.g. Acme Corporation" />
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Business Sector</label>
                                <select class="form-control" id="orgSector" onchange="calc()">
                                    <option>Financial Services</option>
                                    <option>Healthcare</option>
                                    <option selected>Technology &amp; IT</option>
                                    <option>Government</option>
                                    <option>Education</option>
                                    <option>Retail &amp; E-Commerce</option>
                                    <option>Manufacturing</option>
                                    <option>Energy &amp; Utilities</option>
                                    <option>Telecommunications</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Number of Employees</label>
                                <select class="form-control" id="orgEmp" onchange="calc()">
                                    <option>1–50 (Micro)</option>
                                    <option>51–250 (Small)</option>
                                    <option selected>251–1,000 (Medium)</option>
                                    <option>1,001–5,000 (Large)</option>
                                    <option>5,000+ (Enterprise)</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Primary System Type</label>
                            <select class="form-control" id="orgSys" onchange="calc()">
                                <option>Web Application</option>
                                <option selected>Cloud Infrastructure</option>
                                <option>Mobile Application</option>
                                <option>Internal Network / On-Premise</option>
                                <option>Hybrid (Cloud + On-Premise)</option>
                                <option>IoT / OT Systems</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Country / Region</label>
                                <input class="form-control" value="Indonesia" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">Assessment Period</label>
                                <input class="form-control" value="Q1 2026" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Regulatory Frameworks</label>
                            <input class="form-control" value="ISO 27001, NIST CSF, OJK Regulation" />
                        </div>
                        <div class="form-group" style="margin-bottom:0">
                            <label class="form-label">Assessment Scope</label>
                            <textarea class="form-control"
                                rows="3">All customer-facing web applications, AWS cloud infrastructure, and internal HR systems. Third-party integrations excluded from scope.</textarea>
                        </div>
                    </div>

                    <!-- Right column -->
                    <div>
                        <div class="card mb-4">
                            <div class="card-label">Exposure Level Indicator</div>
                            <div class="flex justify-between items-center mb-3">
                                <div>
                                    <div class="text-xs text-t3 uppercase mb-1">Current Level</div>
                                    <div class="mono fw-700" id="expLevel" style="font-size:22px;color:var(--amber)">
                                        MEDIUM</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-xs text-t3 uppercase mb-1">Score</div>
                                    <div class="mono fw-700" id="expScore" style="font-size:22px;color:var(--amber)">55
                                    </div>
                                </div>
                            </div>
                            <div class="exp-row">
                                <div class="exp-track">
                                    <div class="exp-fill" id="expFill" style="width:55%;background:var(--amber)"></div>
                                </div>
                            </div>
                            <p id="expDesc" class="text-sm mt-3" style="color:var(--t2);line-height:1.7">
                                Prioritise patching cycles, access control reviews, and centralised security monitoring.
                            </p>
                        </div>

                        <div class="card">
                            <div class="card-label">OCTAVE Allegro Methodology Progress</div>
                            <div id="steps"></div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <div class="modal-overlay" id="modal-overlay" onclick="if(event.target===this)closeModal()">
        <div class="modal" id="modal-body"></div>
    </div>
    <script src="sidebar.js"></script>
    <script src="app.js"></script>
    <script>
        const STEPS = [
            { label: '1. Establish risk measurement criteria', pct: 100 },
            { label: '2. Develop information asset profiles', pct: 100 },
            { label: '3. Identify information asset containers', pct: 80 },
            { label: '4. Identify areas of concern', pct: 60 },
            { label: '5. Identify threat scenarios', pct: 40 },
            { label: '6. Identify risks', pct: 30 },
            { label: '7. Analyze risks', pct: 5 },
            { label: '8. Select mitigation approach', pct: 0 },
        ];
        const stepColor = p => p === 100 ? 'green' : p === 0 ? 'red' : p >= 40 ? 'amber' : 'blue';
        const stepBadge = p => p === 100 ? ['badge-low', 'Complete'] : p === 0 ? ['badge-neutral', 'Pending'] : ['badge-info', p + '%'];

        document.getElementById('steps').innerHTML = STEPS.map(s => {
            const [bc, bt] = stepBadge(s.pct);
            return `<div style="margin-bottom:14px">
    <div class="flex justify-between items-center mb-2">
      <span class="text-sm" style="color:var(--t2)">${s.label}</span>
      <span class="badge ${bc}" style="flex-shrink:0;margin-left:8px">${bt}</span>
    </div>
    <div class="progress"><div class="progress-bar ${stepColor(s.pct)}" style="width:${s.pct}%"></div></div>
  </div>`;
        }).join('');

        function calc() {
            const sector = document.getElementById('orgSector').value;
            const emp = document.getElementById('orgEmp').value;
            const sys = document.getElementById('orgSys').value;
            const highS = ['Financial Services', 'Healthcare', 'Government', 'Telecommunications'];
            const s1 = highS.includes(sector) ? 30 : sector === 'Technology & IT' ? 20 : 15;
            const s2 = emp.includes('Enterprise') ? 25 : emp.includes('Large') ? 20 : emp.includes('Medium') ? 15 : 10;
            const s3 = sys.includes('Cloud') || sys.includes('Web') ? 20 : sys.includes('Mobile') ? 15 : 10;
            const score = s1 + s2 + s3;
            const level = score >= 55 ? 'HIGH' : score >= 35 ? 'MEDIUM' : 'LOW';
            const col = level === 'HIGH' ? 'var(--red)' : level === 'MEDIUM' ? 'var(--amber)' : 'var(--green)';
            const desc = { HIGH: 'Immediate action required. Engage security team. Schedule emergency controls review.', MEDIUM: 'Prioritise patching cycles, access control reviews, and centralised monitoring.', LOW: 'Maintain current controls. Continue regular assessments and monitoring routines.' };
            document.getElementById('expLevel').textContent = level; document.getElementById('expLevel').style.color = col;
            document.getElementById('expScore').textContent = score; document.getElementById('expScore').style.color = col;
            document.getElementById('expFill').style.cssText = `width:${Math.min(score, 100)}%;background:${col}`;
            document.getElementById('expDesc').textContent = desc[level];
        }
        calc();
        function save() { showToast('success', 'Saved', 'Organization profile updated successfully.'); }
    </script>
</body>

</html>