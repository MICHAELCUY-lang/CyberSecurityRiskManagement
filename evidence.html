<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Evidence Upload â€” CyberRisk Pro</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <div class="app">
        <div class="main">
            <header class="topbar">
                <button class="hamburger" onclick="toggleSidebar()"><svg viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.75">
                        <line x1="3" y1="12" x2="21" y2="12" />
                        <line x1="3" y1="6" x2="21" y2="6" />
                        <line x1="3" y1="18" x2="21" y2="18" />
                    </svg></button>
                <div class="page-header">
                    <div class="page-title">Evidence Upload</div>
                    <div class="breadcrumb"><span>Compliance</span><span class="bc-sep">/</span><span
                            class="bc-cur">Evidence Upload</span></div>
                </div>
            </header>
            <main class="page">

                <div class="card mb-5">
                    <div class="card-label">Upload Supporting Documents</div>
                    <div class="drop-zone" id="dz" ondragover="event.preventDefault();this.classList.add('over')"
                        ondragleave="this.classList.remove('over')" ondrop="onDrop(event)"
                        onclick="document.getElementById('fi').click()">
                        <div class="text-center">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2"
                                style="width:40px;height:40px;stroke:var(--border-2);margin:0 auto 12px;display:block">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="17 8 12 3 7 8" />
                                <line x1="12" y1="3" x2="12" y2="15" />
                            </svg>
                            <p style="color:var(--t2);font-size:13.5px">Drag &amp; drop files here, or <strong
                                    style="color:var(--blue)">click to browse</strong></p>
                            <small style="color:var(--t3);margin-top:6px;display:block">Accepted: PNG, JPG, PDF, DOCX,
                                XLSX &nbsp;&middot;&nbsp; Max 10 MB per file</small>
                        </div>
                    </div>
                    <input type="file" id="fi" multiple accept=".png,.jpg,.jpeg,.pdf,.docx,.xlsx,.gif"
                        style="display:none" onchange="onSel(event)" />
                </div>

                <div class="flex justify-between items-center mb-3">
                    <div>
                        <span class="fw-600" style="font-size:15px">Uploaded Files</span>
                        <span class="badge badge-info ml-2" id="fCount" style="margin-left:8px">0</span>
                    </div>
                    <button class="btn btn-ghost btn-sm" onclick="clearAll()">Clear All</button>
                </div>
                <div class="file-grid" id="fGrid"></div>

            </main>
        </div>
    </div>

    <div class="modal-overlay" id="modal-overlay" onclick="if(event.target===this)closeModal()">
        <div class="modal" id="modal-body"></div>
    </div>
    <script src="sidebar.js"></script>
    <script src="app.js"></script>
    <script>
        const FILE_ICONS = {
            pdf: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" class="f-icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>',
            image: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" class="f-icon"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>',
            excel: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" class="f-icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="8" y1="13" x2="16" y2="13"/><line x1="8" y1="17" x2="16" y2="17"/><line x1="8" y1="9" x2="12" y2="9"/></svg>',
            other: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" class="f-icon"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>',
        };

        const extType = ext => ({ 'pdf': 'pdf', 'png': 'image', 'jpg': 'image', 'jpeg': 'image', 'gif': 'image', 'xlsx': 'excel', 'xls': 'excel' }[ext] || 'other');

        function render() {
            const list = S.files;
            document.getElementById('fCount').textContent = list.length;
            const grid = document.getElementById('fGrid');
            if (!list.length) {
                grid.innerHTML = '<p class="text-t3 text-sm" style="padding:8px 0">No files uploaded yet.</p>';
                return;
            }
            grid.innerHTML = list.map((f, i) => `
    <div class="file-card">
      <button class="f-rm" onclick="removeFile(${i})">&#x2715;</button>
      <div>${FILE_ICONS[f.type] || FILE_ICONS.other}</div>
      <div class="f-name mt-2">${f.name}</div>
      <div class="f-size">${f.size}</div>
    </div>`).join('');
        }

        function onSel(e) { process([...e.target.files]); e.target.value = ''; }
        function onDrop(e) {
            e.preventDefault(); document.getElementById('dz').classList.remove('over');
            process([...e.dataTransfer.files]);
        }

        function process(files) {
            const list = S.files;
            files.forEach(f => {
                const ext = (f.name.split('.').pop() || '').toLowerCase();
                const size = f.size > 1048576 ? `${(f.size / 1048576).toFixed(1)} MB` : `${Math.round(f.size / 1024)} KB`;
                list.push({ name: f.name, size, type: extType(ext) });
                showToast('success', 'Uploaded', `"${f.name}" added to evidence.`);
            });
            S.setFiles(list); render();
        }

        function removeFile(i) {
            const list = S.files, f = list[i];
            confirmAction(`Remove <strong>"${f.name}"</strong> from evidence?`, () => {
                list.splice(i, 1); S.setFiles(list); render();
                showToast('warning', 'Removed', `"${f.name}" removed.`);
            });
        }

        function clearAll() {
            if (!S.files.length) return;
            confirmAction('Remove <strong>all uploaded files</strong> from evidence?', () => {
                S.setFiles([]); render();
                showToast('warning', 'Cleared', 'All evidence files removed.');
            });
        }
        render();
    </script>
</body>

</html>