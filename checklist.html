<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Audit Checklist â€” CyberRisk Pro</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <div class="app">
        <div class="main">
            <header class="topbar">
                <button class="hamburger" onclick="toggleSidebar()"><svg viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.75">
                        <line x1="3" y1="12" x2="21" y2="12" />
                        <line x1="3" y1="6" x2="21" y2="6" />
                        <line x1="3" y1="18" x2="21" y2="18" />
                    </svg></button>
                <div class="page-header">
                    <div class="page-title">Audit Checklist</div>
                    <div class="breadcrumb"><span>Assessment</span><span class="bc-sep">/</span><span
                            class="bc-cur">Audit Checklist</span></div>
                </div>
            </header>
            <main class="page">
                <div class="card mb-4">
                    <div class="flex justify-between items-center mb-3">
                        <span class="card-label mb-0">Overall Compliance Progress</span>
                        <span class="mono fw-700 text-blue" id="pctLbl">62% of applicable controls</span>
                    </div>
                    <div class="progress" style="height:8px;margin-bottom:14px">
                        <div class="progress-bar green" id="pctBar" style="width:62%"></div>
                    </div>
                    <div class="g4" style="margin-bottom:0">
                        <div
                            style="padding:10px;background:var(--green-10);border:1px solid rgba(58,158,110,.2);border-radius:6px;text-align:center">
                            <div class="mono fw-700 text-green" style="font-size:20px" id="cC">8</div>
                            <div class="text-xs text-t3 mt-1">Compliant</div>
                        </div>
                        <div
                            style="padding:10px;background:var(--amber-10);border:1px solid rgba(196,127,40,.2);border-radius:6px;text-align:center">
                            <div class="mono fw-700 text-amber" style="font-size:20px" id="cP">5</div>
                            <div class="text-xs text-t3 mt-1">Partial</div>
                        </div>
                        <div
                            style="padding:10px;background:var(--red-10);border:1px solid rgba(201,71,71,.2);border-radius:6px;text-align:center">
                            <div class="mono fw-700 text-red" style="font-size:20px" id="cN">3</div>
                            <div class="text-xs text-t3 mt-1">Non-Compliant</div>
                        </div>
                        <div
                            style="padding:10px;background:var(--input);border:1px solid var(--border);border-radius:6px;text-align:center">
                            <div class="mono fw-700 text-t3" style="font-size:20px" id="cNA">2</div>
                            <div class="text-xs text-t3 mt-1">Not Applicable</div>
                        </div>
                    </div>
                </div>
                <div id="items"></div>
            </main>
        </div>
    </div>

    <div class="modal-overlay" id="modal-overlay" onclick="if(event.target===this)closeModal()">
        <div class="modal" id="modal-body"></div>
    </div>
    <script src="sidebar.js"></script>
    <script src="app.js"></script>
    <script>
        function borderCol(s) { return s === 'Compliant' ? 'var(--green)' : s === 'Partially Compliant' ? 'var(--amber)' : s === 'Non-Compliant' ? 'var(--red)' : 'var(--border)'; }

        function render() {
            document.getElementById('items').innerHTML = S.checklist.map(item => `
    <div class="cl-row" style="border-left:3px solid ${borderCol(item.status)}">
      <div class="flex-1">
        <div class="cl-text">${item.text}</div>
        <div class="cl-sub">${item.sub}</div>
      </div>
      <select class="status-sel" onchange="update(${item.id},this.value)" style="border-color:${borderCol(item.status)}">
        ${['Compliant', 'Partially Compliant', 'Non-Compliant', 'Not Applicable'].map(s => `<option${s === item.status ? ' selected' : ''}>${s}</option>`).join('')}
      </select>
    </div>`).join('');
            calc(S.checklist);
        }

        function update(id, val) {
            const list = S.checklist, item = list.find(x => x.id === id);
            if (item) { item.status = val; S.setChecklist(list); render(); }
        }

        function calc(list) {
            const c = list.filter(x => x.status === 'Compliant').length;
            const p = list.filter(x => x.status === 'Partially Compliant').length;
            const n = list.filter(x => x.status === 'Non-Compliant').length;
            const na = list.filter(x => x.status === 'Not Applicable').length;
            const tot = list.filter(x => x.status !== 'Not Applicable').length;
            const pct = tot ? Math.round((c / tot) * 100) : 0;
            document.getElementById('pctLbl').textContent = pct + '% of applicable controls';
            document.getElementById('pctBar').style.width = pct + '%';
            document.getElementById('cC').textContent = c;
            document.getElementById('cP').textContent = p;
            document.getElementById('cN').textContent = n;
            document.getElementById('cNA').textContent = na;
        }
        render();
    </script>
</body>

</html>